package ember.qualitycommands.render;

@Environment(EnvType.CLIENT)
public class TransitionFogModifier implements BackgroundRenderer.StatusEffectFogModifier {
    @Override
    public StatusEffect getStatusEffect() {
        return StatusEffects.DARKNESS;
    }

    @Override
    public void applyStartEndModifier(BackgroundRenderer.FogData fogData, LivingEntity entity, StatusEffectInstance effect, float viewDistance, float tickDelta) {
        if (!effect.getFactorCalculationData().isEmpty()) {
            float f = MathHelper.lerp(((FactorCalculationData)effect.getFactorCalculationData().get()).lerp(entity, tickDelta), viewDistance, 15.0F);
            fogData.fogStart = fogData.fogType == BackgroundRenderer.FogType.FOG_SKY ? 0.0F : f * 0.75F;
            fogData.fogEnd = f;
        }
    }

    @Override
    public float applyColorModifier(LivingEntity entity, StatusEffectInstance effect, float f, float tickDelta) {
        return effect.getFactorCalculationData().isEmpty() ? 0.0F : 1.0F - ((FactorCalculationData)effect.getFactorCalculationData().get()).lerp(entity, tickDelta);
    }
}